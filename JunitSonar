pipeline {
  agent any
  tools { 
        maven 'Maven'        
  }
 
  stages {
    stage('Clone repository') {	
      steps {
        checkout scm
        sh 'echo $MYJOB'
      }
    }
      stage('Build') {
        steps {
        sh 'mvn clean package'
        sh 'echo $USER'
        sh 'echo whoami'
        sh 'echo $MYJOB'
        } 
        }
        stage('JunitResults') {
        steps {
                junit '**/target/**/*.xml'
           }
        }
        stage('Sonarqube') {
        steps {
        withSonarQubeEnv ('sonarqube'){
        def scannerHome = tool 'sonar';
            sh "${scannerHome}/bin/sonar-scanner sonar.host.url=https://sonarcloud.io sonar.login=bc7ccb521384bb422496330161fff3221fd99903 sonar.organization=sonar333 sonar.projectKey=dev3084 sonar.source= sonar.language=java sonar.java.binaries=target/classes"
                }
            }
        }       
        }
      }
